- [What is Prometheus?](#what-is-prometheus)
- [Key Features](#key-features)
- [How Prometheus Works](#how-prometheus-works)
- [Prometheus Architecture](#prometheus-architecture)
- [Prometheus Query Language (PromQL)](#prometheus-query-language-promql)
- [Prometheus Use Cases](#prometheus-use-cases)
- [Advantages](#advantages)
- [Limitations](#limitations)

## What is Prometheus?
- Prometheus is an **open-source monitoring and alerting toolkit** designed for **time-series data**.
- Originally developed at **SoundCloud**, now part of the **Cloud Native Computing Foundation (CNCF)**.
- Ideal for monitoring cloud-native and containerized applications.

---

## Key Features
- **Time-Series Database**: Stores metrics with timestamps, labels, and values.
- **Pull-based Model**: Prometheus actively scrapes metrics from targets at specified intervals.
- **PromQL (Prometheus Query Language)**: A powerful query language to retrieve and manipulate metrics.
- **Multi-dimensional Data Model**: Data is stored with labels (key-value pairs) for easy filtering and aggregation.
- **Alerting**: Integrated with **Alertmanager** for defining and sending alerts (e.g., email, Slack, PagerDuty).
- **Exporters**: Collect metrics from third-party systems (e.g., Node Exporter for system metrics, MySQL Exporter).
- **Service Discovery**: Dynamically discovers scrape targets from Kubernetes, AWS EC2, Consul, etc.

---

## How Prometheus Works
1. **Scrape Metrics**: Prometheus fetches data from configured targets (e.g., exporters, services).
2. **Store Metrics**: Data is stored in its **time-series database**.
3. **Query Metrics**: Users can query the data using **PromQL**.
4. **Alerting**: Based on defined rules, it triggers alerts via **Alertmanager**.

---

## Prometheus Architecture
1. **Prometheus Server**:
   - Scrapes and stores time-series data.
   - Executes PromQL queries.
2. **Exporters**:
   - Collect metrics from services and expose them as HTTP endpoints.
   - Examples: Node Exporter, MySQL Exporter, Blackbox Exporter.
3. **Alertmanager**:
   - Handles alerts generated by Prometheus.
   - Manages silencing, grouping, and routing alerts to receivers (e.g., email, Slack).
4. **Pushgateway**:
   - Temporary storage for metrics that cannot be scraped (e.g., batch jobs).
5. **Web UI**:
   - Provides basic graphs and a query editor.

---

## Prometheus Query Language (PromQL)
- A domain-specific language for querying metrics.
- Example queries:
  - `rate(http_requests_total[5m])`: Calculate the rate of HTTP requests over the last 5 minutes.
  - `avg(cpu_usage{instance="server1"})`: Average CPU usage for a specific instance.

---

## Prometheus Use Cases
1. **Application Monitoring**: Track application-level metrics like API response times or error rates.
2. **Infrastructure Monitoring**: Monitor CPU, memory, disk usage, and network statistics of servers.
3. **Kubernetes Monitoring**: Scrape metrics from Kubernetes clusters for pods, nodes, and services.
4. **Alerting**: Generate alerts for anomalies or threshold breaches in the system.
5. **Visualization**: Integrate with **Grafana** for creating advanced dashboards.

---

## Advantages
- Lightweight and easy to deploy.
- Rich query language (PromQL).
- Active and large community.
- Integrates seamlessly with cloud-native architectures.

## Limitations
- No built-in long-term storage (requires external systems like Thanos or Cortex for scalability).
- Pull-based model may not suit certain edge or intermittent systems.
- Not designed for event logging (e.g., audit logs or request logs).

---
